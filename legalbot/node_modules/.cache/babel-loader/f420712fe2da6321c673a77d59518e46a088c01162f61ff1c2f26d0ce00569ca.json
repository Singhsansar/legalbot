{"ast":null,"code":"import { createTree } from './createTree';\n\n/**\n * Similarity between two nodes\n * @param {Tree|Array<Array<number>>} a - tree A node\n * @param {Tree|Array<Array<number>>} b - tree B node\n * @param {object} [options]\n * @return {number} similarity measure between tree nodes\n */\nexport function getSimilarity(a, b, options = {}) {\n  const {\n    alpha = 0.1,\n    beta = 0.33,\n    gamma = 0.001\n  } = options;\n  if (a === null || b === null) {\n    return 0;\n  }\n  if (Array.isArray(a)) {\n    a = createTree(a);\n  }\n  if (Array.isArray(b)) {\n    b = createTree(b);\n  }\n  var C = alpha * Math.min(a.sum, b.sum) / Math.max(a.sum, b.sum) + (1 - alpha) * Math.exp(-gamma * Math.abs(a.center - b.center));\n  return beta * C + (1 - beta) * (getSimilarity(a.left, b.left, options) + getSimilarity(a.right, b.right, options)) / 2;\n}","map":{"version":3,"names":["createTree","getSimilarity","a","b","options","alpha","beta","gamma","Array","isArray","C","Math","min","sum","max","exp","abs","center","left","right"],"sources":["/home/nikhil/legalbot/legalbot/node_modules/ml-tree-similarity/src/getSimilarity.js"],"sourcesContent":["import { createTree } from './createTree';\n\n/**\n * Similarity between two nodes\n * @param {Tree|Array<Array<number>>} a - tree A node\n * @param {Tree|Array<Array<number>>} b - tree B node\n * @param {object} [options]\n * @return {number} similarity measure between tree nodes\n */\nexport function getSimilarity(a, b, options = {}) {\n  const { alpha = 0.1, beta = 0.33, gamma = 0.001 } = options;\n\n  if (a === null || b === null) {\n    return 0;\n  }\n  if (Array.isArray(a)) {\n    a = createTree(a);\n  }\n  if (Array.isArray(b)) {\n    b = createTree(b);\n  }\n\n  var C =\n    (alpha * Math.min(a.sum, b.sum)) / Math.max(a.sum, b.sum) +\n    (1 - alpha) * Math.exp(-gamma * Math.abs(a.center - b.center));\n\n  return (\n    beta * C +\n    ((1 - beta) *\n      (getSimilarity(a.left, b.left, options) +\n        getSimilarity(a.right, b.right, options))) /\n      2\n  );\n}\n"],"mappings":"AAAA,SAASA,UAAU,QAAQ,cAAc;;AAEzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,SAASC,aAAaA,CAACC,CAAC,EAAEC,CAAC,EAAEC,OAAO,GAAG,CAAC,CAAC,EAAE;EAChD,MAAM;IAAEC,KAAK,GAAG,GAAG;IAAEC,IAAI,GAAG,IAAI;IAAEC,KAAK,GAAG;EAAM,CAAC,GAAGH,OAAO;EAE3D,IAAIF,CAAC,KAAK,IAAI,IAAIC,CAAC,KAAK,IAAI,EAAE;IAC5B,OAAO,CAAC;EACV;EACA,IAAIK,KAAK,CAACC,OAAO,CAACP,CAAC,CAAC,EAAE;IACpBA,CAAC,GAAGF,UAAU,CAACE,CAAC,CAAC;EACnB;EACA,IAAIM,KAAK,CAACC,OAAO,CAACN,CAAC,CAAC,EAAE;IACpBA,CAAC,GAAGH,UAAU,CAACG,CAAC,CAAC;EACnB;EAEA,IAAIO,CAAC,GACFL,KAAK,GAAGM,IAAI,CAACC,GAAG,CAACV,CAAC,CAACW,GAAG,EAAEV,CAAC,CAACU,GAAG,CAAC,GAAIF,IAAI,CAACG,GAAG,CAACZ,CAAC,CAACW,GAAG,EAAEV,CAAC,CAACU,GAAG,CAAC,GACzD,CAAC,CAAC,GAAGR,KAAK,IAAIM,IAAI,CAACI,GAAG,CAAC,CAACR,KAAK,GAAGI,IAAI,CAACK,GAAG,CAACd,CAAC,CAACe,MAAM,GAAGd,CAAC,CAACc,MAAM,CAAC,CAAC;EAEhE,OACEX,IAAI,GAAGI,CAAC,GACP,CAAC,CAAC,GAAGJ,IAAI,KACPL,aAAa,CAACC,CAAC,CAACgB,IAAI,EAAEf,CAAC,CAACe,IAAI,EAAEd,OAAO,CAAC,GACrCH,aAAa,CAACC,CAAC,CAACiB,KAAK,EAAEhB,CAAC,CAACgB,KAAK,EAAEf,OAAO,CAAC,CAAC,GAC3C,CAAC;AAEP","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}