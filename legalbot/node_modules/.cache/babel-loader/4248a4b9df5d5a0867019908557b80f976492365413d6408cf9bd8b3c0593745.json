{"ast":null,"code":"import * as uuid from \"uuid\";\nimport { getEnvironmentVariable, getRuntimeEnvironment } from \"./utils/env.js\";\nimport { Client } from \"./client.js\";\nconst warnedMessages = {};\nfunction warnOnce(message) {\n  if (!warnedMessages[message]) {\n    console.warn(message);\n    warnedMessages[message] = true;\n  }\n}\nfunction stripNonAlphanumeric(input) {\n  return input.replace(/[-:.]/g, \"\");\n}\nexport function convertToDottedOrderFormat(epoch, runId) {\n  return stripNonAlphanumeric(`${new Date(epoch).toISOString().slice(0, -1)}000Z`) + runId;\n}\nexport class RunTree {\n  constructor(config) {\n    Object.defineProperty(this, \"id\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(this, \"name\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(this, \"run_type\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(this, \"project_name\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(this, \"parent_run\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(this, \"child_runs\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(this, \"start_time\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(this, \"end_time\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(this, \"extra\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(this, \"tags\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(this, \"error\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(this, \"serialized\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(this, \"inputs\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(this, \"outputs\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(this, \"reference_example_id\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(this, \"client\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(this, \"events\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(this, \"trace_id\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(this, \"dotted_order\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: void 0\n    });\n    const defaultConfig = RunTree.getDefaultConfig();\n    const client = config.client ?? new Client();\n    Object.assign(this, {\n      ...defaultConfig,\n      ...config,\n      client\n    });\n    if (!this.trace_id) {\n      if (this.parent_run) {\n        this.trace_id = this.parent_run.trace_id ?? this.id;\n      } else {\n        this.trace_id = this.id;\n      }\n    }\n    if (!this.dotted_order) {\n      const currentDottedOrder = convertToDottedOrderFormat(this.start_time, this.id);\n      if (this.parent_run) {\n        this.dotted_order = this.parent_run.dotted_order + \".\" + currentDottedOrder;\n      } else {\n        this.dotted_order = currentDottedOrder;\n      }\n    }\n  }\n  static fromRunnableConfig(config, props) {\n    // We only handle the callback manager case for now\n    const callbackManager = config?.callbacks;\n    let parentRun;\n    let projectName;\n    if (callbackManager) {\n      const parentRunId = callbackManager?.getParentRunId?.() ?? \"\";\n      const langChainTracer = callbackManager?.handlers?.find(handler => handler?.name == \"langchain_tracer\");\n      parentRun = langChainTracer?.getRun?.(parentRunId);\n      projectName = langChainTracer?.projectName;\n    }\n    const deduppedTags = [...new Set((parentRun?.tags ?? []).concat(config?.tags ?? []))];\n    const dedupedMetadata = {\n      ...parentRun?.extra?.metadata,\n      ...config?.metadata\n    };\n    const rt = new RunTree({\n      name: props?.name ?? \"<lambda>\",\n      parent_run: parentRun,\n      tags: deduppedTags,\n      extra: {\n        metadata: dedupedMetadata\n      },\n      project_name: projectName\n    });\n    return rt;\n  }\n  static getDefaultConfig() {\n    return {\n      id: uuid.v4(),\n      run_type: \"chain\",\n      project_name: getEnvironmentVariable(\"LANGCHAIN_PROJECT\") ?? getEnvironmentVariable(\"LANGCHAIN_SESSION\") ??\n      // TODO: Deprecate\n      \"default\",\n      child_runs: [],\n      api_url: getEnvironmentVariable(\"LANGCHAIN_ENDPOINT\") ?? \"http://localhost:1984\",\n      api_key: getEnvironmentVariable(\"LANGCHAIN_API_KEY\"),\n      caller_options: {},\n      start_time: Date.now(),\n      serialized: {},\n      inputs: {},\n      extra: {}\n    };\n  }\n  async createChild(config) {\n    const child = new RunTree({\n      ...config,\n      parent_run: this,\n      project_name: this.project_name,\n      client: this.client\n    });\n    this.child_runs.push(child);\n    return child;\n  }\n  async end(outputs, error, endTime = Date.now()) {\n    this.outputs = outputs;\n    this.error = error;\n    this.end_time = endTime;\n  }\n  async _convertToCreate(run, excludeChildRuns = true) {\n    const runExtra = run.extra ?? {};\n    if (!runExtra.runtime) {\n      runExtra.runtime = {};\n    }\n    const runtimeEnv = await getRuntimeEnvironment();\n    for (const [k, v] of Object.entries(runtimeEnv)) {\n      if (!runExtra.runtime[k]) {\n        runExtra.runtime[k] = v;\n      }\n    }\n    let child_runs;\n    let parent_run_id;\n    if (!excludeChildRuns) {\n      child_runs = await Promise.all(run.child_runs.map(child_run => this._convertToCreate(child_run, excludeChildRuns)));\n      parent_run_id = undefined;\n    } else {\n      parent_run_id = run.parent_run?.id;\n      child_runs = [];\n    }\n    const persistedRun = {\n      id: run.id,\n      name: run.name,\n      start_time: run.start_time,\n      end_time: run.end_time,\n      run_type: run.run_type,\n      reference_example_id: run.reference_example_id,\n      extra: runExtra,\n      serialized: run.serialized,\n      error: run.error,\n      inputs: run.inputs,\n      outputs: run.outputs,\n      session_name: run.project_name,\n      child_runs: child_runs,\n      parent_run_id: parent_run_id,\n      trace_id: run.trace_id,\n      dotted_order: run.dotted_order,\n      tags: run.tags\n    };\n    return persistedRun;\n  }\n  async postRun(excludeChildRuns = true) {\n    const runCreate = await this._convertToCreate(this, true);\n    await this.client.createRun(runCreate);\n    if (!excludeChildRuns) {\n      warnOnce(\"Posting with excludeChildRuns=false is deprecated and will be removed in a future version.\");\n      for (const childRun of this.child_runs) {\n        await childRun.postRun(false);\n      }\n    }\n  }\n  async patchRun() {\n    const runUpdate = {\n      end_time: this.end_time,\n      error: this.error,\n      outputs: this.outputs,\n      parent_run_id: this.parent_run?.id,\n      reference_example_id: this.reference_example_id,\n      extra: this.extra,\n      events: this.events,\n      dotted_order: this.dotted_order,\n      trace_id: this.trace_id,\n      tags: this.tags\n    };\n    await this.client.updateRun(this.id, runUpdate);\n  }\n}\nexport function isRunTree(x) {\n  return x !== undefined && typeof x.createChild === \"function\" && typeof x.postRun === \"function\";\n}\nfunction containsLangChainTracerLike(x) {\n  return Array.isArray(x) && x.some(callback => {\n    return typeof callback.name === \"string\" && callback.name === \"langchain_tracer\";\n  });\n}\nexport function isRunnableConfigLike(x) {\n  // Check that it's an object with a callbacks arg\n  // that has either a CallbackManagerLike object with a langchain tracer within it\n  // or an array with a LangChainTracerLike object within it\n  return x !== undefined && typeof x.callbacks === \"object\" && (\n  // Callback manager with a langchain tracer\n  containsLangChainTracerLike(x.callbacks?.handlers) ||\n  // Or it's an array with a LangChainTracerLike object within it\n  containsLangChainTracerLike(x.callbacks));\n}","map":{"version":3,"names":["uuid","getEnvironmentVariable","getRuntimeEnvironment","Client","warnedMessages","warnOnce","message","console","warn","stripNonAlphanumeric","input","replace","convertToDottedOrderFormat","epoch","runId","Date","toISOString","slice","RunTree","constructor","config","Object","defineProperty","enumerable","configurable","writable","value","defaultConfig","getDefaultConfig","client","assign","trace_id","parent_run","id","dotted_order","currentDottedOrder","start_time","fromRunnableConfig","props","callbackManager","callbacks","parentRun","projectName","parentRunId","getParentRunId","langChainTracer","handlers","find","handler","name","getRun","deduppedTags","Set","tags","concat","dedupedMetadata","extra","metadata","rt","project_name","v4","run_type","child_runs","api_url","api_key","caller_options","now","serialized","inputs","createChild","child","push","end","outputs","error","endTime","end_time","_convertToCreate","run","excludeChildRuns","runExtra","runtime","runtimeEnv","k","v","entries","parent_run_id","Promise","all","map","child_run","undefined","persistedRun","reference_example_id","session_name","postRun","runCreate","createRun","childRun","patchRun","runUpdate","events","updateRun","isRunTree","x","containsLangChainTracerLike","Array","isArray","some","callback","isRunnableConfigLike"],"sources":["/home/nikhil/legalbot/legalbot/node_modules/langsmith/dist/run_trees.js"],"sourcesContent":["import * as uuid from \"uuid\";\nimport { getEnvironmentVariable, getRuntimeEnvironment } from \"./utils/env.js\";\nimport { Client } from \"./client.js\";\nconst warnedMessages = {};\nfunction warnOnce(message) {\n    if (!warnedMessages[message]) {\n        console.warn(message);\n        warnedMessages[message] = true;\n    }\n}\nfunction stripNonAlphanumeric(input) {\n    return input.replace(/[-:.]/g, \"\");\n}\nexport function convertToDottedOrderFormat(epoch, runId) {\n    return (stripNonAlphanumeric(`${new Date(epoch).toISOString().slice(0, -1)}000Z`) +\n        runId);\n}\nexport class RunTree {\n    constructor(config) {\n        Object.defineProperty(this, \"id\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"name\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"run_type\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"project_name\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"parent_run\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"child_runs\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"start_time\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"end_time\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"extra\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"tags\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"error\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"serialized\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"inputs\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"outputs\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"reference_example_id\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"client\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"events\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"trace_id\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"dotted_order\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        const defaultConfig = RunTree.getDefaultConfig();\n        const client = config.client ?? new Client();\n        Object.assign(this, { ...defaultConfig, ...config, client });\n        if (!this.trace_id) {\n            if (this.parent_run) {\n                this.trace_id = this.parent_run.trace_id ?? this.id;\n            }\n            else {\n                this.trace_id = this.id;\n            }\n        }\n        if (!this.dotted_order) {\n            const currentDottedOrder = convertToDottedOrderFormat(this.start_time, this.id);\n            if (this.parent_run) {\n                this.dotted_order =\n                    this.parent_run.dotted_order + \".\" + currentDottedOrder;\n            }\n            else {\n                this.dotted_order = currentDottedOrder;\n            }\n        }\n    }\n    static fromRunnableConfig(config, props) {\n        // We only handle the callback manager case for now\n        const callbackManager = config?.callbacks;\n        let parentRun;\n        let projectName;\n        if (callbackManager) {\n            const parentRunId = callbackManager?.getParentRunId?.() ?? \"\";\n            const langChainTracer = callbackManager?.handlers?.find((handler) => handler?.name == \"langchain_tracer\");\n            parentRun = langChainTracer?.getRun?.(parentRunId);\n            projectName = langChainTracer?.projectName;\n        }\n        const deduppedTags = [\n            ...new Set((parentRun?.tags ?? []).concat(config?.tags ?? [])),\n        ];\n        const dedupedMetadata = {\n            ...parentRun?.extra?.metadata,\n            ...config?.metadata,\n        };\n        const rt = new RunTree({\n            name: props?.name ?? \"<lambda>\",\n            parent_run: parentRun,\n            tags: deduppedTags,\n            extra: {\n                metadata: dedupedMetadata,\n            },\n            project_name: projectName,\n        });\n        return rt;\n    }\n    static getDefaultConfig() {\n        return {\n            id: uuid.v4(),\n            run_type: \"chain\",\n            project_name: getEnvironmentVariable(\"LANGCHAIN_PROJECT\") ??\n                getEnvironmentVariable(\"LANGCHAIN_SESSION\") ?? // TODO: Deprecate\n                \"default\",\n            child_runs: [],\n            api_url: getEnvironmentVariable(\"LANGCHAIN_ENDPOINT\") ?? \"http://localhost:1984\",\n            api_key: getEnvironmentVariable(\"LANGCHAIN_API_KEY\"),\n            caller_options: {},\n            start_time: Date.now(),\n            serialized: {},\n            inputs: {},\n            extra: {},\n        };\n    }\n    async createChild(config) {\n        const child = new RunTree({\n            ...config,\n            parent_run: this,\n            project_name: this.project_name,\n            client: this.client,\n        });\n        this.child_runs.push(child);\n        return child;\n    }\n    async end(outputs, error, endTime = Date.now()) {\n        this.outputs = outputs;\n        this.error = error;\n        this.end_time = endTime;\n    }\n    async _convertToCreate(run, excludeChildRuns = true) {\n        const runExtra = run.extra ?? {};\n        if (!runExtra.runtime) {\n            runExtra.runtime = {};\n        }\n        const runtimeEnv = await getRuntimeEnvironment();\n        for (const [k, v] of Object.entries(runtimeEnv)) {\n            if (!runExtra.runtime[k]) {\n                runExtra.runtime[k] = v;\n            }\n        }\n        let child_runs;\n        let parent_run_id;\n        if (!excludeChildRuns) {\n            child_runs = await Promise.all(run.child_runs.map((child_run) => this._convertToCreate(child_run, excludeChildRuns)));\n            parent_run_id = undefined;\n        }\n        else {\n            parent_run_id = run.parent_run?.id;\n            child_runs = [];\n        }\n        const persistedRun = {\n            id: run.id,\n            name: run.name,\n            start_time: run.start_time,\n            end_time: run.end_time,\n            run_type: run.run_type,\n            reference_example_id: run.reference_example_id,\n            extra: runExtra,\n            serialized: run.serialized,\n            error: run.error,\n            inputs: run.inputs,\n            outputs: run.outputs,\n            session_name: run.project_name,\n            child_runs: child_runs,\n            parent_run_id: parent_run_id,\n            trace_id: run.trace_id,\n            dotted_order: run.dotted_order,\n            tags: run.tags,\n        };\n        return persistedRun;\n    }\n    async postRun(excludeChildRuns = true) {\n        const runCreate = await this._convertToCreate(this, true);\n        await this.client.createRun(runCreate);\n        if (!excludeChildRuns) {\n            warnOnce(\"Posting with excludeChildRuns=false is deprecated and will be removed in a future version.\");\n            for (const childRun of this.child_runs) {\n                await childRun.postRun(false);\n            }\n        }\n    }\n    async patchRun() {\n        const runUpdate = {\n            end_time: this.end_time,\n            error: this.error,\n            outputs: this.outputs,\n            parent_run_id: this.parent_run?.id,\n            reference_example_id: this.reference_example_id,\n            extra: this.extra,\n            events: this.events,\n            dotted_order: this.dotted_order,\n            trace_id: this.trace_id,\n            tags: this.tags,\n        };\n        await this.client.updateRun(this.id, runUpdate);\n    }\n}\nexport function isRunTree(x) {\n    return (x !== undefined &&\n        typeof x.createChild === \"function\" &&\n        typeof x.postRun === \"function\");\n}\nfunction containsLangChainTracerLike(x) {\n    return (Array.isArray(x) &&\n        x.some((callback) => {\n            return (typeof callback.name === \"string\" &&\n                callback.name === \"langchain_tracer\");\n        }));\n}\nexport function isRunnableConfigLike(x) {\n    // Check that it's an object with a callbacks arg\n    // that has either a CallbackManagerLike object with a langchain tracer within it\n    // or an array with a LangChainTracerLike object within it\n    return (x !== undefined &&\n        typeof x.callbacks === \"object\" &&\n        // Callback manager with a langchain tracer\n        (containsLangChainTracerLike(x.callbacks?.handlers) ||\n            // Or it's an array with a LangChainTracerLike object within it\n            containsLangChainTracerLike(x.callbacks)));\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}